[{"/home/scruz/repos/learn/react/react-auth0/src/index.js":"1","/home/scruz/repos/learn/react/react-auth0/src/App.js":"2","/home/scruz/repos/learn/react/react-auth0/src/reportWebVitals.js":"3","/home/scruz/repos/learn/react/react-auth0/src/Home.js":"4","/home/scruz/repos/learn/react/react-auth0/src/Profile.js":"5","/home/scruz/repos/learn/react/react-auth0/src/Nav.js":"6","/home/scruz/repos/learn/react/react-auth0/src/Auth/Auth.js":"7","/home/scruz/repos/learn/react/react-auth0/src/Callback.js":"8","/home/scruz/repos/learn/react/react-auth0/src/Public.js":"9","/home/scruz/repos/learn/react/react-auth0/src/Private.js":"10"},{"size":622,"mtime":1610733916454,"results":"11","hashOfConfig":"12"},{"size":1687,"mtime":1614628739822,"results":"13","hashOfConfig":"12"},{"size":362,"mtime":1610654542965,"results":"14","hashOfConfig":"12"},{"size":646,"mtime":1610754391700,"results":"15","hashOfConfig":"12"},{"size":940,"mtime":1610994724461,"results":"16","hashOfConfig":"12"},{"size":1181,"mtime":1611692571239,"results":"17","hashOfConfig":"12"},{"size":2523,"mtime":1611668473960,"results":"18","hashOfConfig":"12"},{"size":517,"mtime":1610737899749,"results":"19","hashOfConfig":"12"},{"size":826,"mtime":1614623248952,"results":"20","hashOfConfig":"12"},{"size":1027,"mtime":1614630893157,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"eqf6y6",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"24"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38","usedDeprecatedRules":"24"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/scruz/repos/learn/react/react-auth0/src/index.js",[],["45","46"],"/home/scruz/repos/learn/react/react-auth0/src/App.js",[],"/home/scruz/repos/learn/react/react-auth0/src/reportWebVitals.js",[],"/home/scruz/repos/learn/react/react-auth0/src/Home.js",["47"],"import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nclass Home extends Component {\n\n    \n\n    render() {\n        const {isAuthenticated, login} = this.props.auth\n        return (\n            <div>\n                <h1>HOme</h1>\n                { isAuthenticated()? \n                    (\n                        <Link to=\"/profile\">View profile</Link>\n                    ) \n                    :\n                    (\n                        <button onClick={this.props.auth.login}>Log In</button>\n                    )\n                }\n                \n            </div>\n        );\n    }\n}\n\nexport default Home;","/home/scruz/repos/learn/react/react-auth0/src/Profile.js",[],"/home/scruz/repos/learn/react/react-auth0/src/Nav.js",[],"/home/scruz/repos/learn/react/react-auth0/src/Auth/Auth.js",["48"],"import auth0 from 'auth0-js'\nimport Callback from '../Callback';\n\n\nexport default class Auth {\n\n    constructor(history) {\n        this.history = history;\n        this.userProfile = null;\n        this.auth0 = new auth0.WebAuth({\n            domain: process.env.REACT_APP_AUTH0_DOMAIN,\n            clientID: process.env.REACT_APP_AUTH0_CLIENTE_ID,\n            redirectUri: process.env.REACT_APP_AUTH0_CALLBACK_URL,\n            audience: process.env.REACT_APP_AUTH0_AUDIENCE,\n            responseType: \"token id_token\",\n            scope: \"openid profile email\"\n        })\n    }\n\n    login = () => {\n        this.auth0.authorize();\n    }\n\n    handleAuthentication = () => {\n        this.auth0.parseHash( (err, authResult) => {\n            if (authResult && authResult.accessToken && authResult.idToken) {\n                this.setSession(authResult)\n                this.history.push(\"/\")\n            } else if (err) {\n                this.history.push(\"/\")\n                alert(`Error: ${err.error}. Check the console for further details.`)\n                console.log(err)\n            }\n        } )\n    }\n\n    setSession = authResult => {\n        // console.log(authResult)\n        //set the time that the access token will expire\n        const expiresAt = JSON.stringify(\n            authResult.expiresIn * 1000 + new Date().getTime()\n        )\n\n        localStorage.setItem('access_token', authResult.accessToken)\n        localStorage.setItem('id_token', authResult.idToken)\n        localStorage.setItem('expires_at', expiresAt)\n    }\n\n    isAuthenticated() {\n        const expiresAt = JSON.parse(localStorage.getItem(\"expires_at\"))\n        return new Date().getTime() < expiresAt;\n    }\n\n    logout = () => {\n        localStorage.removeItem('access_token')\n        localStorage.removeItem('id_token')\n        localStorage.removeItem('expires_at')\n\n        this.userProfile = null;\n\n        this.auth0.logout({\n            clientID: process.env.REACT_APP_AUTH0_CLIENTE_ID,\n            returnTo: process.env.REACT_APP_URL\n        })\n    }\n\n    getAccessToken() {\n        const accessToken = localStorage.getItem('access_token');\n        if (!accessToken) {\n            throw new Error('No access token found.')\n        }\n        return accessToken;\n    }\n\n    getProfile = (cb) => {\n        if (this.userProfile) return cb(this.userProfile); \n        this.auth0.client.userInfo(this.getAccessToken(), (err, profile) => {\n            if (profile) this.userProfile = profile;\n            cb(profile, err) \n        })\n    }\n}","/home/scruz/repos/learn/react/react-auth0/src/Callback.js",[],"/home/scruz/repos/learn/react/react-auth0/src/Public.js",[],"/home/scruz/repos/learn/react/react-auth0/src/Private.js",[],{"ruleId":"49","replacedBy":"50"},{"ruleId":"51","replacedBy":"52"},{"ruleId":"53","severity":1,"message":"54","line":9,"column":33,"nodeType":"55","messageId":"56","endLine":9,"endColumn":38},{"ruleId":"53","severity":1,"message":"57","line":2,"column":8,"nodeType":"55","messageId":"56","endLine":2,"endColumn":16},"no-native-reassign",["58"],"no-negated-in-lhs",["59"],"no-unused-vars","'login' is assigned a value but never used.","Identifier","unusedVar","'Callback' is defined but never used.","no-global-assign","no-unsafe-negation"]